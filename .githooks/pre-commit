#!/bin/sh

echo "ğŸ” Running pre-commit hook..."

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test || {
    printf "\e[31mâŒ Tests failed! Fix the issues before committing.\e[0m\n";
    exit 1;
}

# ì½”ë“œ ìŠ¤íƒ€ì¼ ê²€ì‚¬ (ìë™ ìˆ˜ì • ì—†ìŒ)
./gradlew spotlessCheck || {
    printf "\e[31mâŒ Spotless check failed! './gradlew spotlessApply'ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  sptlessê°€ ì ìš©ëœ íŒŒì¼ë“¤ì„ ë‹¤ì‹œ add í›„ commití•´ì£¼ì„¸ìš”.\e[0m\n";
    exit 1;
}

# í”„ë¡œì íŠ¸ ë¹Œë“œ ìˆ˜í–‰
./gradlew build || {
    printf "\e[31mâŒ Build failed! Fix the issues before committing.\e[0m\n";
    exit 1;
}

printf "\e[32mâœ… pre-commit checks passed!\e[0m\n"
exit 0
